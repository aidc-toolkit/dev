name: Release

on:
  release:
    types:
      - published
  push:
    branches:
      - main

jobs:
  release:
    runs-on: ubuntu-latest

    steps:
      - name: Dump GitHub context
        run: |
          cat << EOF
          ${{ toJSON(github) }}
          EOF

      - uses: aidc-toolkit/dev/.github/actions/build-test-publish@main
        with:
          secrets: ${{ toJSON(secrets) }}
          vars: ${{ toJSON(vars) }}
